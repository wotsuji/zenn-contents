---
title: "今と昔のCSSでテーブルを行ごとに色変えするパターン（CSS：nth-child）"
emoji: "🙌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["css","html","php"]
published: false
---
# はじめに
社内向けの管理システムなどでtableを使ってデータを一覧表示させる時に見やすくなるように「行ごとに色変えをする」という事が多いと思います。今時のCSSを知っていればtableの行ごとの色変えは簡単に書けますが知らなければ昔ながらの書き方をしてしまいます。今と昔の書き方を比較してみたいと思います。
※コードはPHPを例にしています。

# 昔ながらの書き方
```php
<table>
<?php
for ($i=1; $i<10; $i++) {
  $bgcolor = "ffffff";
  if ( $i % 2 === 0) {
    $bgcolor = "c0c0e0";
  }
?>
<tr style="background-color: <?php echo $bgcolor; ?>;">
 <td>hoge</td>
 <td>fuga</td>
</tr>
<?php
}
?>
</table>
```
2,4,6...と、2の倍数の行の時に色を変える昔ながらのコードです。
定数やクラスなどの設計によっては、どんな値が入ってくるのか想像できなくなってしまったり、管理画面などの場合は多くの条件分岐が入って見通しの悪いコードになってしまいます。

# 今時の書き方
```php
<style>
/* 3行目から2行ごとに色を当てる */
tr.nth:nth-child(2n+3) {
  background-color: #88a2fb;
}
</style>
<table>
<?php
for ($i=1; $i<10; $i++) {
?>
<tr class="nth">
  <td>hoge</td>
  <td>fuga</td>
</tr>
<?php
}
?>
</table>
```
コードによる色変えではなく、CSSの「nth-child」を使用します。
もちろん、管理画面によくある「この値の時だけは赤色にする・・・」というような例外は発生すると思いますが、CSSは適用される優先順位が決まってますので応用を効かせる事は可能と思います。なにより１つでも条件分岐が減らせる事にメリットがあると思います。

# 「nth-child」について
「nth-child」は「疑似クラス」と言いいます。全てにCSSを適用するのではなく適用する要素を引数で指定して選択する事ができます。（2つ目、4つ目...など。引数は「1」からはじまる。）
※「疑似クラス」は「nth-child」以外にも複数存在します。

「nth-child」の構文
```html
tr:nth-child( [引数] ){
  ...
}
```

引数は数字以外に定数や計算式を入れる事ができます。
```
◆定数（キーワード値）
odd 奇数（1,3,5...）
even 偶数（2,4,6...）
◆計算式
An Aは刻み値（2nであれば偶数と同じく「2,4,6...」3nであれば「3,6,9...」となります）
An+B Bは加算値（2n+3 3番目から開始する）
※2n+1とすると1,3,5...行目と 開始位置B から A間隔 となります
```
